<div class="container my-5">
  <h1 class="text-center mb-4 fw-bold text-primary">Explore Available Cars</h1>

  <!-- Search Filters -->
  <div class="bg-white p-4 mb-4 rounded shadow-sm border">
    <div class="row g-3">
      <div class="col-md-3">
        <label class="form-label">Model</label>
        <input type="text" [(ngModel)]="searchModel" (input)="onSearchChange()" class="form-control"
          placeholder="Search by model">
      </div>
      <div class="col-md-3">
        <label class="form-label">Location</label>
        <input type="text" [(ngModel)]="location" (input)="onSearchChange()" class="form-control"
          placeholder="Search by location">
      </div>
      <div class="col-md-3">
        <label class="form-label">Min Price</label>
        <input type="number" [(ngModel)]="minPrice" (input)="onSearchChange()" class="form-control" placeholder="0">
      </div>
      <div class="col-md-3">
        <label class="form-label">Max Price</label>
        <input type="number" [(ngModel)]="maxPrice" (input)="onSearchChange()" class="form-control"
          placeholder="10000000">
      </div>
    </div>
    <div class="mt-3">
      <button (click)="resetFilters()" class="btn btn-outline-secondary btn-sm">Reset Filters</button>
    </div>
  </div>

  <!-- باقي الكود زي ما هو -->
  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-danger text-center">
    {{ errorMessage }}
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading && cars.length === 0" class="text-center my-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3 text-muted">Loading cars...</p>
  </div>

  <!-- No Data Message -->
  <div *ngIf="!isLoading && !errorMessage && cars.length === 0" class="text-center my-5">
    <p class="text-muted fs-5">No cars available at the moment</p>
  </div>

  <!-- Cars Grid -->
  <div *ngIf="!isLoading && !errorMessage && cars.length > 0" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
    @for (car of cars; track car.id) {
<div  class="col">

      <div class="card h-100 shadow-sm border-light">
        <img [src]="car.imageUrl" [alt]="car.model || 'Car Image'" class="card-img-top"
          style="height: 200px; object-fit: cover;">
        <div class="card-body d-flex flex-column">
          <h3 class="card-title fs-5 fw-bold text-dark">{{ car.model }}</h3>
          <p class="text-muted mb-1">{{ car.description }}</p>

          <div class="mt-3">
            <p class="mb-1"><strong>Company:</strong> {{ car.companyName }}</p>
            <p class="mb-1"><strong>Capacity:</strong> {{ car.capacity}} passengers</p>
            <p class="mb-2"><strong>Location:</strong> {{ car.location || 'N/A' }}</p>
          </div>

          <div class="price text-success fs-5 fw-bold mt-2">
            ${{ car.price }}/day
          </div>

          <button [routerLink]="['/cars', car.id]" class="btn btn-outline-primary mt-auto py-2">
            View Details
          </button>
        </div>
      </div>
    </div>
    }
    
  </div>

  <!-- Pagination -->
  <nav *ngIf="!isLoading && !errorMessage && cars.length > 0" class="d-flex justify-content-center mt-5">
    <ul class="pagination">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <button class="page-link" (click)="prevPage()">Previous</button>
      </li>
      <li class="page-item disabled">
        <span class="page-link">Page {{ currentPage }} of {{ totalPages }}</span>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <button class="page-link" (click)="nextPage()">Next</button>
      </li>
    </ul>
  </nav>
</div>